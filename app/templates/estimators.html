{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% from "bootstrap/pagination.html" import render_pagination %}

{% block page_content %}
    <div class="page-header">
        <h1> Estimators</h1>
    </div>

    <div class="container">
        <div class="table-bordered" >
            <table class="table table-hover table-responsive ">
            <thead>
                <th>id</th>
                <th>name</th>
                <th>target</th>
                <th>performance</th>
                <th>timestamp</th>
                <th>status</th>
                <th>operation</th>
            </thead>
            <tbody>
            {% for estimator in estimators.items %}
                <tr>
                    <td>{{ estimator.id }}</td>
                    <td>{{ estimator.name }}</td>
                    <td>{{ estimator.target }}</td>
                    <td>{{ estimator.performance }}</td>
                    <td>{{ estimator.timestamp }}</td>
                    <td>
                        {{ 'Ready' if estimator.status else 'Building' }}
                    </td>
                    <td>{{ render_op(estimator.status, estimator.id) }}</td>
                </tr>
            {% endfor %}
            </tbody>
            </table>
        </div>
        <div class="tab-pane">
            {{render_pagination(estimators, prev='Prev', next='Next')}}
        </div>
    </div>

{% endblock %}


{% macro render_op(status, id) %}
    {% if status %}
        <a href="{{ url_for('main.predict_index', id=id) }}"
            class="btn-success">Apply</a> |
        <a href="{{ url_for('main.estimators_delete', id=id) }}"
           class="btn-danger">Del</a>
    {% else %}
        {{ 'Apply' }} | {{ 'Del' }}
    {% endif %}
{% endmacro %}